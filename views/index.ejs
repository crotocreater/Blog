<%- include("hearder.ejs") %>
<div class="container">
  <h1>Blog Community</h1>
  <% if(key === 'no'){ %>
    <ul id="postsList">
      <% posts.forEach(post => { %>
        <li>
          <h2><%= post.title %></h2>
          <small><%= post.postsdate %></small>
          <p><%= post.contentposts %></p>
          <small><a href="/author/<%=post.userid%>" class="author">By: <%= post.atthor %></a></small>
          <span class="cmt-like">
            <p id="comment" onclick="isComment()"><i class="fa-solid fa-comment"></i></p>
            <p id="like" onclick="isLike()"><i class="fa-regular fa-thumbs-up"></i></p>
            <p id="dislike" onclick="dislike()"><i class="fa-regular fa-thumbs-down"></i></p>
          </span>
        </li>
      <% }); %>
    </ul>
  <% } else if(key === 'user'){ %>
    <ul id="postsList">
      <% posts.forEach(post => { %>
        <li>
          <h2><%= post.title %></h2>
          <small><%= post.postsdate %></small>
          <p><%= post.contentposts %></p>
          <small><a href="/author/<%=post.userid%>" class="author">By: <%= post.atthor %></a></small>
          <span class="cmt-like">
            <p id="comment" onclick="isComment()"><i class="fa-solid fa-comment"></i></p>
            <p id="like" onclick="isLike()"><i class="fa-regular fa-thumbs-up"></i></p>
            <p id="dislike" onclick="dislike()"><i class="fa-regular fa-thumbs-down"></i></p>
          </span>
        </li>
      <% }); %>
    </ul>
  <% } else if(key === 'bloger'){ %>
    <a class="a newPostBtn" href="/new">New Post</a> 
    <ul id="postsList">
      <% posts.forEach(post => { %>
        <li>
          <h2><%= post.title %></h2>
          <small><%= post.postsdate %></small>
          <p><%= post.contentposts %></p>
          <small><a href="/author/<%=post.userid%>" class="author">By: <%= post.atthor %></a></small>

          <a class="a edit" href="/edit/<%= post.id %>"><i class="fa-regular fa-thumbs-up"></i></a>
          <a class="a delete" href="/api/posts/delete/<%= post.id %>"><i class="fa-regular fa-comment"></i> </a>
          <span class="cmt-like">
            <p id="comment" onclick="isComment()"><i class="fa-solid fa-comment"></i></p>
            <p id="like" onclick="isLike()"><i class="fa-regular fa-thumbs-up"></i></p>
            <p id="dislike" onclick="dislike()"><i class="fa-regular fa-thumbs-down"></i></p>
          </span>
        </li>
      <% }); %>
    </ul>
  <% } else if(key === 'admin'){ %>
    <a class="newPostBtn a" href="/new">New Post</a> 
    <ul id="postsList">
      <% posts.forEach(post => { %>
        <li>
          <h2><%= post.title %></h2>
          <small><%= post.postsdate %></small>
          <p><%= post.contentposts %></p>
          <small><a href="/author/<%=post.userid%>" class="author">By: <%= post.atthor %></a></small>
          <span class="cmt-like">
            <p id="comment" onclick="isComment()"><i class="fa-solid fa-comment"></i></p>
            <p id="like" onclick="isLike()"><i class="fa-regular fa-thumbs-up"></i></p>
            <p id="dislike" onclick="dislike()"><i class="fa-regular fa-thumbs-down"></i></p>
          </span>
          <a class="a delete" href="/api/posts/delete/<%= post.id %>">Delete</a>          
        </li>
      <% }); %>
    </ul>
  <% } else { %>
    <h1>Error</h1>
  <% } %>
</div>

</body>
<script>
  document.getElementById('search').onclick = function() {
      document.forms[0].submit();  // Gửi biểu mẫu đầu tiên trên trang
  };
</script>

</html>